{"version":3,"sources":["../../../build/webpack/require-hook.ts"],"names":["hookPropertyMap","Map","map","request","replacement","require","resolve","mod","resolveFilename","_resolveFilename","parent","isMain","options","hookResolved","get","call"],"mappings":";;AAAA;AACA;AACA;AAEA,MAAMA,eAAe,GAAG,IAAIC,GAAJ,CACtB,CACE,CAAC,SAAD,EAAY,wCAAZ,CADF,EAEE,CAAC,iBAAD,EAAoB,oCAApB,CAFF,EAGE,CAAC,sBAAD,EAAyB,oCAAzB,CAHF,EAIE,CAAC,qBAAD,EAAwB,wCAAxB,CAJF,EAKE,CAAC,wBAAD,EAA2B,wCAA3B,CALF,EAME,CACE,wCADF,EAEE,kDAFF,CANF,EAUE,CACE,2CADF,EAEE,kDAFF,CAVF,EAcE,CACE,sCADF,EAEE,qDAFF,CAdF,EAkBE,CACE,yCADF,EAEE,qDAFF,CAlBF,EAsBE,CACE,mCADF,EAEE,6CAFF,CAtBF,EA0BE,CACE,sCADF,EAEE,6CAFF,CA1BF,EA8BE,CACE,mCADF,EAEE,kDAFF,CA9BF,EAkCE,CACE,sCADF,EAEE,kDAFF,CAlCF,EAsCE,CAAC,0BAAD,EAA6B,yCAA7B,CAtCF,EAuCE,CAAC,6BAAD,EAAgC,yCAAhC,CAvCF,EAwCE,CAAC,0BAAD,EAA6B,yCAA7B,CAxCF,EAyCE,CAAC,iBAAD,EAAoB,oCAApB,CAzCF,EA0CE,CAAC,qBAAD,EAAwB,oCAAxB,CA1CF,EA2CE,CAAC,2BAAD,EAA8B,oCAA9B,CA3CF,EA4CE,CAAC,8BAAD,EAAiC,oCAAjC,CA5CF,EA6CEC,GA7CF,CA6CM,CAAC,CAACC,OAAD,EAAUC,WAAV,CAAD,KAA4B,CAACD,OAAD,EAAUE,OAAO,CAACC,OAAR,CAAgBF,WAAhB,CAAV,CA7ClC,CADsB,CAAxB;;AAiDA,MAAMG,GAAG,GAAGF,OAAO,CAAC,QAAD,CAAnB;;AACA,MAAMG,eAAe,GAAGD,GAAG,CAACE,gBAA5B;;AACAF,GAAG,CAACE,gBAAJ,GAAuB,UACrBN,OADqB,EAErBO,MAFqB,EAGrBC,MAHqB,EAIrBC,OAJqB,EAKrB;AACA,QAAMC,YAAY,GAAGb,eAAe,CAACc,GAAhB,CAAoBX,OAApB,CAArB;AACA,MAAIU,YAAJ,EAAkBV,OAAO,GAAGU,YAAV;AAClB,SAAOL,eAAe,CAACO,IAAhB,CAAqBR,GAArB,EAA0BJ,OAA1B,EAAmCO,MAAnC,EAA2CC,MAA3C,EAAmDC,OAAnD,CAAP;AACD,CATD","sourcesContent":["// sync injects a hook for webpack and webpack/... requires to use the internal ncc webpack version\r\n// this is in order for userland plugins to attach to the same webpack instance as next.js\r\n// the individual compiled modules are as defined for the compilation in bundles/webpack/packages/*\r\n\r\nconst hookPropertyMap = new Map(\r\n  [\r\n    ['webpack', 'next/dist/compiled/webpack/webpack-lib'],\r\n    ['webpack/package', 'next/dist/compiled/webpack/package'],\r\n    ['webpack/package.json', 'next/dist/compiled/webpack/package'],\r\n    ['webpack/lib/webpack', 'next/dist/compiled/webpack/webpack-lib'],\r\n    ['webpack/lib/webpack.js', 'next/dist/compiled/webpack/webpack-lib'],\r\n    [\r\n      'webpack/lib/node/NodeEnvironmentPlugin',\r\n      'next/dist/compiled/webpack/NodeEnvironmentPlugin',\r\n    ],\r\n    [\r\n      'webpack/lib/node/NodeEnvironmentPlugin.js',\r\n      'next/dist/compiled/webpack/NodeEnvironmentPlugin',\r\n    ],\r\n    [\r\n      'webpack/lib/BasicEvaluatedExpression',\r\n      'next/dist/compiled/webpack/BasicEvaluatedExpression',\r\n    ],\r\n    [\r\n      'webpack/lib/BasicEvaluatedExpression.js',\r\n      'next/dist/compiled/webpack/BasicEvaluatedExpression',\r\n    ],\r\n    [\r\n      'webpack/lib/node/NodeTargetPlugin',\r\n      'next/dist/compiled/webpack/NodeTargetPlugin',\r\n    ],\r\n    [\r\n      'webpack/lib/node/NodeTargetPlugin.js',\r\n      'next/dist/compiled/webpack/NodeTargetPlugin',\r\n    ],\r\n    [\r\n      'webpack/lib/ModuleFilenameHelpers',\r\n      'next/dist/compiled/webpack/ModuleFilenameHelpers',\r\n    ],\r\n    [\r\n      'webpack/lib/ModuleFilenameHelpers.js',\r\n      'next/dist/compiled/webpack/ModuleFilenameHelpers',\r\n    ],\r\n    ['webpack/lib/GraphHelpers', 'next/dist/compiled/webpack/GraphHelpers'],\r\n    ['webpack/lib/GraphHelpers.js', 'next/dist/compiled/webpack/GraphHelpers'],\r\n    ['webpack/lib/NormalModule', 'next/dist/compiled/webpack/NormalModule'],\r\n    ['webpack-sources', 'next/dist/compiled/webpack/sources'],\r\n    ['webpack-sources/lib', 'next/dist/compiled/webpack/sources'],\r\n    ['webpack-sources/lib/index', 'next/dist/compiled/webpack/sources'],\r\n    ['webpack-sources/lib/index.js', 'next/dist/compiled/webpack/sources'],\r\n  ].map(([request, replacement]) => [request, require.resolve(replacement)])\r\n)\r\n\r\nconst mod = require('module')\r\nconst resolveFilename = mod._resolveFilename\r\nmod._resolveFilename = function (\r\n  request: string,\r\n  parent: any,\r\n  isMain: boolean,\r\n  options: any\r\n) {\r\n  const hookResolved = hookPropertyMap.get(request)\r\n  if (hookResolved) request = hookResolved\r\n  return resolveFilename.call(mod, request, parent, isMain, options)\r\n}\r\n"]}