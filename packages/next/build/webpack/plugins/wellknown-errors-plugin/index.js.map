{"version":3,"sources":["../../../../../build/webpack/plugins/wellknown-errors-plugin/index.ts"],"names":["WellKnownErrorsPlugin","apply","compiler","hooks","compilation","tap","afterSeal","tapPromise","errors","length","Promise","all","map","err","moduleError","e","console","log"],"mappings":";;;;;AACA;;AAEO,MAAMA,qBAAN,CAA4B;AACjCC,EAAAA,KAAK,CAACC,QAAD,EAA6B;AAChCA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,uBAA/B,EAAyDD,WAAD,IAAiB;AACvEA,MAAAA,WAAW,CAACD,KAAZ,CAAkBG,SAAlB,CAA4BC,UAA5B,CACE,uBADF,EAEE,YAAY;AAAA;;AACV,mCAAIH,WAAW,CAACI,MAAhB,aAAI,oBAAoBC,MAAxB,EAAgC;AAC9BL,UAAAA,WAAW,CAACI,MAAZ,GAAqB,MAAME,OAAO,CAACC,GAAR,CACzBP,WAAW,CAACI,MAAZ,CAAmBI,GAAnB,CAAuB,MAAOC,GAAP,IAAe;AACpC,gBAAI;AACF,oBAAMC,WAAW,GAAG,MAAM,6CACxBV,WADwB,EAExBS,GAFwB,CAA1B;AAIA,qBAAOC,WAAW,KAAK,KAAhB,GAAwBD,GAAxB,GAA8BC,WAArC;AACD,aAND,CAME,OAAOC,CAAP,EAAU;AACVC,cAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACA,qBAAOF,GAAP;AACD;AACF,WAXD,CADyB,CAA3B;AAcD;AACF,OAnBH;AAqBD,KAtBD;AAuBD;;AAzBgC","sourcesContent":["import { webpack } from 'next/dist/compiled/webpack/webpack'\r\nimport { getModuleBuildError } from './webpackModuleError'\r\n\r\nexport class WellKnownErrorsPlugin {\r\n  apply(compiler: webpack.Compiler) {\r\n    compiler.hooks.compilation.tap('WellKnownErrorsPlugin', (compilation) => {\r\n      compilation.hooks.afterSeal.tapPromise(\r\n        'WellKnownErrorsPlugin',\r\n        async () => {\r\n          if (compilation.errors?.length) {\r\n            compilation.errors = await Promise.all(\r\n              compilation.errors.map(async (err) => {\r\n                try {\r\n                  const moduleError = await getModuleBuildError(\r\n                    compilation,\r\n                    err\r\n                  )\r\n                  return moduleError === false ? err : moduleError\r\n                } catch (e) {\r\n                  console.log(e)\r\n                  return err\r\n                }\r\n              })\r\n            )\r\n          }\r\n        }\r\n      )\r\n    })\r\n  }\r\n}\r\n"]}